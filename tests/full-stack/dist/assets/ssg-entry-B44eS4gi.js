let r=null;function d(t){t.cleanup&&t.cleanup();for(const n of t.deps)n.delete(t);t.deps.clear();const e=r;r=t;try{t.cleanup=t.execute()}finally{r=e}}function f(t){for(const e of[...t])d(e)}function a(t){let e=t;const n=new Set;function c(u){if(arguments.length===0)return r&&(n.add(r),r.deps.add(n)),e;{const o=u;return Object.is(e,o)||(e=o,f(n)),e}}return Object.defineProperty(c,"value",{get(){return c()},set(u){c(u)},enumerable:!0}),c._subscribe=u=>{const o={execute:()=>u(e),deps:new Set,cleanup:void 0};return n.add(o),()=>{n.delete(o);for(const s of o.deps)s.delete(o)}},c._peek=()=>e,c}function i(t){const e={execute:t,deps:new Set,cleanup:void 0};return d(e),()=>{e.cleanup&&e.cleanup();for(const n of e.deps)n.delete(e);e.deps.clear()}}function l(){const t=document.getElementById("app");if(!t){console.warn("Lumix SSG: Root element not found");return}t.querySelectorAll("button").forEach(n=>{if(n.textContent&&n.textContent.includes("Count:")){const c=n.textContent.match(/Count:\s*(\d+)/),u=c?parseInt(c[1],10):0,o=a(u);i(()=>{const s=o();n.textContent=`Count: ${s}`}),n.onclick=()=>{o(o()+1)}}}),console.log("Lumix SSG: Content hydrated successfully")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l();
